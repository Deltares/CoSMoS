<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meteo collection &mdash; CoSMoS 0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running CoSMoS" href="running.html" />
    <link rel="prev" title="Defining super regions" href="superregions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            CoSMoS
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../manual.html">User manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="modelcomponents.html">Overview model components and folder structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html">Quickstart CoSMoS</a></li>
<li class="toctree-l2"><a class="reference internal" href="addingmodels.html">Adding models to the database</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Setting up your configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="scenario.html">Setting up a scenario</a></li>
<li class="toctree-l2"><a class="reference internal" href="stations.html">Observation stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="superregions.html">Defining super regions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Meteo collection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#regularly-gridded-meteo-data">Regularly gridded meteo data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spiderweb-forcing">Spiderweb forcing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#track-ensemble">Track ensemble</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="running.html">Running CoSMoS</a></li>
<li class="toctree-l2"><a class="reference internal" href="output.html">CoSMoS output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CoSMoS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../manual.html">User manual</a></li>
      <li class="breadcrumb-item active">Meteo collection</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/manual/meteo.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="meteo-collection">
<span id="meteo"></span><h1>Meteo collection<a class="headerlink" href="#meteo-collection" title="Permalink to this headline">¶</a></h1>
<p>CoSMoS automatically downloads, collects and writes meteorological data for each model based on user-defined settings in the <a class="reference internal" href="scenario.html#scenario"><span class="std std-ref">scenario file</span></a>.
The path to your meteo database must be specified in the <a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">*config.toml*</span></a> file. An example of a meteo folder structure is given below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>meteo
└── meteo_subsets.xml
├── gfs_forecast_0p25_north_atlantic
    ├── 20170704_00z
        └── gfs_forecast_0p25_north_atlantic.20170704_0000.nc
        └── gfs_forecast_0p25_north_atlantic.20170704_0300.nc
├── gfs_anl_0p50_north_atlantic
    └── gfs_anl_0p50_north_atlantic.20170704_0000.nc
    └── gfs_anl_0p50_north_atlantic.20170704_0300.nc
├── spiderwebs
    └── irma.spw/cyc
├── tracks
    └── irma.cyc
</pre></div>
</div>
<p>This example meteo folders shows the three main types of meteo data:</p>
<ul class="simple">
<li><p><strong>Regularly gridded meteo data</strong> (keyword: <em>meteo_dataset</em> in scenario file). The <em>gfs_forecast_0p25_north_atlantic</em> and <em>gfs_anl_0p50_north_atlantic</em> folders are examples of regularly gridded meteo data.</p></li>
<li><p><strong>Spiderweb grid meteo data</strong> (keyword: <em>meteo_spiderweb</em> in scenario file). The <em>irma.spw</em> file in the folder <em>spiderwebs</em> is an example of spiderweb forcing.</p></li>
<li><p><strong>Ensemble of tracks</strong> (keyword: <em>meteo_track</em> in scenario file). The <em>irma.cyc</em> file in the folder <em>tracks</em> is an example of cyclone file.</p></li>
</ul>
<p>Metadata for the <em>meteo_datasets</em>, <em>spiderweb</em>, and <em>track</em> files are contained in the <em>meteo_subsets.xml</em> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!-- Written on 11-Oct-2011 19:14:31 using the XML Toolbox for Matlab --&gt;
&lt;root&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;gfs_forecast_0p25_conus&lt;/name&gt;
    &lt;source&gt;gfs_forecast_0p25&lt;/source&gt;
    &lt;x_range type=&quot;float&quot;&gt;-110.0,-50.0&lt;/x_range&gt;
    &lt;y_range type=&quot;float&quot;&gt;23.0,50.0&lt;/y_range&gt;
  &lt;/meteo_subset&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;gfs_forecast_0p25_us_east_gom&lt;/name&gt;
    &lt;source&gt;gfs_forecast_0p25&lt;/source&gt;
    &lt;x_range type=&quot;float&quot;&gt;-99.0,-50.0&lt;/x_range&gt;
    &lt;y_range type=&quot;float&quot;&gt;17.0,50.0&lt;/y_range&gt;
  &lt;/meteo_subset&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;gfs_anl_0p50_us_east_gom&lt;/name&gt;
    &lt;source&gt;gfs_anl_0p50&lt;/source&gt;
    &lt;x_range type=&quot;float&quot;&gt;-99.0,-50.0&lt;/x_range&gt;
    &lt;y_range type=&quot;float&quot;&gt;17.0,50.0&lt;/y_range&gt;
  &lt;/meteo_subset&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;gfs_anl_0p50_conus&lt;/name&gt;
    &lt;source&gt;gfs_anl_0p50&lt;/source&gt;
    &lt;x_range type=&quot;float&quot;&gt;-110.0,-50.0&lt;/x_range&gt;
    &lt;y_range type=&quot;float&quot;&gt;23.0,50.0&lt;/y_range&gt;
  &lt;/meteo_subset&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;spiderwebs&lt;/name&gt;
    &lt;source&gt;jtwc&lt;/source&gt;
  &lt;/meteo_subset&gt;
  &lt;meteo_subset&gt;
    &lt;name&gt;tracks&lt;/name&gt;
    &lt;source&gt;jtwc&lt;/source&gt;
  &lt;/meteo_subset&gt;
&lt;/root&gt;
</pre></div>
</div>
<p>The following attributes can be included in the meteo subsets:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 44%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>name</p></td>
<td><p>Name of the meteo dataset</p></td>
<td><p>default setting</p></td>
<td><p>unit</p></td>
</tr>
<tr class="row-even"><td><p>source</p></td>
<td><p>Source of meteo dataset. Options: gfs_anl_0p50, gfs_forecast_0p25, coamps_analysis, coamps_tc_hindcast, coamps_tc_forecast, alternative</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>x_range, y_range</p></td>
<td><p>Optional: X and Y range for which meteo data needs to be downloaded / collected (in EPSG 4326).</p></td>
<td><p>None</p></td>
<td><p>Degree</p></td>
</tr>
<tr class="row-even"><td><p>xystride</p></td>
<td><p>Optional: Reduce the resolution of the meteo dataset by a factor xystride.</p></td>
<td><p>1</p></td>
<td></td>
</tr>
</tbody>
</table>
<section id="regularly-gridded-meteo-data">
<h2>Regularly gridded meteo data<a class="headerlink" href="#regularly-gridded-meteo-data" title="Permalink to this headline">¶</a></h2>
<p>Regularly gridded meteorological datasets contain <em>netcdf</em> files with the following information:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 44%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>parameter</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>dimensions</p></th>
<th class="head"><p>unit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>lat</p></td>
<td><p>Latitude</p></td>
<td><p>lat</p></td>
<td><p>degree</p></td>
</tr>
<tr class="row-odd"><td><p>lon</p></td>
<td><p>Longitude</p></td>
<td><p>lon</p></td>
<td><p>degree</p></td>
</tr>
<tr class="row-even"><td><p>wind_u</p></td>
<td><p>Wind speed in x direction</p></td>
<td><p>[lon, lat]</p></td>
<td><p>m/s</p></td>
</tr>
<tr class="row-odd"><td><p>wind_v</p></td>
<td><p>Wind speed in y direction</p></td>
<td><p>[lon, lat]</p></td>
<td><p>m/s</p></td>
</tr>
<tr class="row-even"><td><p>barometric_pressure</p></td>
<td><p>Barometric pressure</p></td>
<td><p>[lon, lat]</p></td>
<td><p>Pa</p></td>
</tr>
<tr class="row-odd"><td><p>precipitation</p></td>
<td><p>Precipitation</p></td>
<td><p>[lon, lat]</p></td>
<td><p>mm/hr</p></td>
</tr>
</tbody>
</table>
<p>The netcdf files must be named as follows:</p>
<p>&lt;dataset_name&gt;.&lt;yyyymmdd_hhmm&gt;.nc.</p>
<p>For forecasts, the netcdf files are contained in a folder with the cycle time name (see meteo folder structure above).</p>
<p>CoSMoS gets the meteo data in two steps:</p>
<ul>
<li><dl>
<dt>Download</dt><dd><blockquote>
<div><p>If the keyword <em>get_meteo</em> is set to True (see <a class="reference internal" href="../_generated/cosmos.cosmos.CoSMoS.html#cosmos.cosmos.CoSMoS" title="cosmos.cosmos.CoSMoS"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmos.cosmos.CoSMoS</span></code></a>), meteo data are downloaded from a webserver. The following datasets can be downloaded automatically:</p>
</div></blockquote>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>dataset</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>gfs_anl_0p50</p></td>
<td><p>Global Forecast System (GFS) analysis</p></td>
</tr>
<tr class="row-odd"><td><p>gfs_forecast_0p25</p></td>
<td><p>Global Forecast System (GFS) forecast</p></td>
</tr>
<tr class="row-even"><td><p>coamps_analysis</p></td>
<td><p>Coupled Ocean/Atmosphere Mesoscale Prediction System (COAMPS) analysis</p></td>
</tr>
<tr class="row-odd"><td><p>coamps_tc_hindcast</p></td>
<td><p>Coupled Ocean/Atmosphere Mesoscale Prediction System (COAMPS) tropical cyclone hindcast</p></td>
</tr>
<tr class="row-even"><td><p>coamps_tc_forecast</p></td>
<td><p>Coupled Ocean/Atmosphere Mesoscale Prediction System (COAMPS) tropical cyclone hindcast</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Collect</dt><dd><p>CoSMoS loops through the <em>meteo_subset.xml</em> data and finds subsets that match the <em>meteo_dataset</em> specified in the scenario file.
For each <em>meteo_subset</em>, CoSMoS collects the data from the netcdf files that are located in the specific meteo folder.
The individual CoSMoS model classes (see <a class="reference internal" href="modelcomponents.html#modelclasses"><span class="std std-ref">Model classes</span></a>) then write the meteo input files.</p>
</dd>
</dl>
</li>
</ul>
</section>
<section id="spiderweb-forcing">
<h2>Spiderweb forcing<a class="headerlink" href="#spiderweb-forcing" title="Permalink to this headline">¶</a></h2>
<p>For cyclone forecasting, spiderweb grids are commonly used.
Spiderwebs are circular grids, for which each time in the time series of space varying wind and pressure (and potentially precipitation)
the position of the cyclone eye must be given. For more information, see also the <a class="reference external" href="https://publicwiki.deltares.nl/display/DDB/Tropical+Cyclone">Tropical Cyclone Toolbox</a> and the <a class="reference external" href="https://oss.deltares.nl/web/delft3d/manuals">Delft3D-FLOW manual</a>.</p>
<p>When using a single spiderweb as forcing, use the keyword: <em>&lt;meteo_spiderweb&gt;</em> in the scenario file,
indicating the name of the spiderweb (without extension) that is located in the <em>spiderwebs</em> folder of your meteo database.</p>
</section>
<section id="track-ensemble">
<h2>Track ensemble<a class="headerlink" href="#track-ensemble" title="Permalink to this headline">¶</a></h2>
<p>To include track uncertainties in cyclone forecasting, CoSMoS can also generate an ensemble of tracks.
In this way, we can obtain a probabilistic estimate of nearshore water levels, waves, and inundation.
The cyclone tracks are generated based on De Maria et al. (2009), taking into account along-track (AT), cross-track (CT), and maximum wind speed (VE) errors.
For more information, see the <a class="reference external" href="https://publicwiki.deltares.nl/display/DDB/Advanced+Tropical+Cyclone">Advanced Tropical Cyclone Toolbox</a>.</p>
<ul class="simple">
<li><p>To run a scenario in ensemble mode, set the keyword <em>ensemble</em> to True (see <a class="reference internal" href="running.html#running"><span class="std std-ref">Running CoSMoS</span></a> and <a class="reference internal" href="../_generated/cosmos.cosmos.CoSMoS.html#cosmos.cosmos.CoSMoS" title="cosmos.cosmos.CoSMoS"><code class="xref py py-class docutils literal notranslate"><span class="pre">cosmos.cosmos.CoSMoS</span></code></a>).</p></li>
<li><p>The keyword <em>track_ensemble_nr_realizations</em> in the scenario file specifies the number of tracks that need to be generated. CoSMoS starts running in ensemble mode if this keyword is defined.</p></li>
<li><p>There are two options for meteo ensemble forcing:</p>
<ul>
<li><p>The keyword <em>meteo_dataset</em> is defined in the scenario file: a cyclone track is estimated from regularly gridded wind field data. This track is then used to generate an ensemble of tracks.</p></li>
<li><p>The keyword <em>meteo_track</em> is defined in the scenario file: a track ensemble is generated based on this best track file.</p></li>
</ul>
</li>
</ul>
<p>CoSMoS determines which models to run in ensemble mode based on the cone of the generated tracks. All models that lie within this cone are run for the track ensemble.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="superregions.html" class="btn btn-neutral float-left" title="Defining super regions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="running.html" class="btn btn-neutral float-right" title="Running CoSMoS" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Deltares.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>